# å·¥ç¨‹åŒ–é…ç½®æ–‡æ¡£

æœ¬æ–‡æ¡£è®°å½•äº†é¡¹ç›®ä¸­çš„å·¥ç¨‹åŒ–é…ç½®ï¼ŒåŒ…æ‹¬ä»£ç æ£€æŸ¥ã€æ ¼å¼åŒ–ã€Git hooks ç­‰ã€‚

## ğŸ“‹ ç›®å½•

- [ESLint é…ç½®](#eslint-é…ç½®)
- [Prettier é…ç½®](#prettier-é…ç½®)
- [Git Hooks](#git-hooks)
  - [Pre-commit Hook](#pre-commit-hook)
  - [Commit-msg Hook](#commit-msg-hook)
- [å¯ç”¨å‘½ä»¤](#å¯ç”¨å‘½ä»¤)

## ESLint é…ç½®

### é…ç½®æ–‡ä»¶

- `eslint.config.js` - ESLint 9 çš„ flat config æ ¼å¼

### æŠ€æœ¯æ ˆæ”¯æŒ

- âœ… React 19 å’Œæ–°çš„ JSX Transform
- âœ… TypeScript 5.9
- âœ… React Router v7
- âœ… Vite 7

### ä½¿ç”¨çš„æ’ä»¶

- `@typescript-eslint/parser` - TypeScript è§£æå™¨
- `@typescript-eslint/eslint-plugin` - TypeScript è§„åˆ™
- `eslint-plugin-react` - React è§„åˆ™
- `eslint-plugin-react-hooks` - React Hooks è§„åˆ™
- `eslint-plugin-react-refresh` - Vite React Refresh æ”¯æŒ
- `eslint-config-prettier` - ä¸ Prettier é›†æˆï¼Œé¿å…å†²çª

### ä¸»è¦è§„åˆ™

- ä½¿ç”¨ TypeScript æ¨èè§„åˆ™
- ä½¿ç”¨ React æ¨èè§„åˆ™å’Œ JSX Runtime è§„åˆ™
- æ”¯æŒ React Hooks è§„åˆ™
- å…³é—­ `no-undef`ï¼ˆTypeScript å·²å¤„ç†ï¼‰
- å…³é—­ `no-empty-pattern`ï¼ˆå…è®¸ç©ºå¯¹è±¡è§£æ„ï¼‰
- æœªä½¿ç”¨çš„å˜é‡è­¦å‘Šï¼ˆä»¥ `_` å¼€å¤´çš„å˜é‡å¿½ç•¥ï¼‰

## Prettier é…ç½®

### é…ç½®æ–‡ä»¶

- `.prettierrc` - Prettier é…ç½®
- `.prettierignore` - å¿½ç•¥æ–‡ä»¶é…ç½®

### é…ç½®é€‰é¡¹

```json
{
  "semi": true,
  "trailingComma": "es5",
  "singleQuote": false,
  "printWidth": 80,
  "tabWidth": 2,
  "useTabs": false,
  "arrowParens": "always",
  "endOfLine": "lf",
  "bracketSpacing": true,
  "bracketSameLine": false
}
```

## Git Hooks

é¡¹ç›®ä½¿ç”¨ [Husky](https://typicode.github.io/husky/) ç®¡ç† Git hooksã€‚

### Pre-commit Hook

**æ–‡ä»¶**: `.husky/pre-commit`

åœ¨æ¯æ¬¡ commit å‰è‡ªåŠ¨æ‰§è¡Œï¼Œä½¿ç”¨ [lint-staged](https://github.com/lint-staged/lint-staged) åªå¯¹æš‚å­˜çš„æ–‡ä»¶è¿›è¡Œæ£€æŸ¥å’Œæ ¼å¼åŒ–ã€‚

#### æ‰§è¡Œæµç¨‹

1. å¯¹æš‚å­˜çš„ `*.{ts,tsx,js,jsx}` æ–‡ä»¶ï¼š
   - è¿è¡Œ `eslint --fix` è‡ªåŠ¨ä¿®å¤é—®é¢˜
   - è¿è¡Œ `prettier --write` æ ¼å¼åŒ–ä»£ç 
2. å¯¹æš‚å­˜çš„ `*.{json,css,md,yml,yaml}` æ–‡ä»¶ï¼š
   - è¿è¡Œ `prettier --write` æ ¼å¼åŒ–ä»£ç 

#### lint-staged é…ç½®

```json
{
  "lint-staged": {
    "*.{ts,tsx,js,jsx}": ["eslint --fix", "prettier --write"],
    "*.{json,css,md,yml,yaml}": ["prettier --write"]
  }
}
```

### Commit-msg Hook

**æ–‡ä»¶**: `.husky/commit-msg`

ä½¿ç”¨ [commitlint](https://commitlint.js.org/) éªŒè¯ commit message æ ¼å¼ï¼Œéµå¾ª [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒã€‚

#### Commit Message æ ¼å¼

```
<type>(<scope>): <subject>

[optional body]

[optional footer(s)]
```

#### å…è®¸çš„ Type

- `feat` - æ–°åŠŸèƒ½
- `fix` - ä¿®å¤ bug
- `docs` - æ–‡æ¡£å˜æ›´
- `style` - ä»£ç æ ¼å¼ï¼ˆä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨ï¼‰
- `refactor` - é‡æ„ï¼ˆæ—¢ä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®å¤ bugï¼‰
- `perf` - æ€§èƒ½ä¼˜åŒ–
- `test` - å¢åŠ æµ‹è¯•
- `chore` - æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨
- `revert` - å›æ»š
- `build` - æ‰“åŒ…
- `ci` - CI é…ç½®

#### è§„åˆ™

- `type` å¿…é¡»å°å†™
- `type` ä¸èƒ½ä¸ºç©º
- `subject` ä¸èƒ½ä¸ºç©º
- `subject` ä¸èƒ½ä»¥ `.` ç»“å°¾
- `header` æœ€å¤§é•¿åº¦ä¸º 100 å­—ç¬¦
- `scope` å¿…é¡»å°å†™ï¼ˆå¦‚æœæä¾›ï¼‰

#### ç¤ºä¾‹

âœ… **æ­£ç¡®æ ¼å¼**:

```
feat: add user authentication
fix: resolve memory leak in data processing
docs: update API documentation
refactor: simplify component structure
```

âŒ **é”™è¯¯æ ¼å¼**:

```
invalid commit message
feat:
Add new feature
feat: add new feature.
```

#### Commitlint é…ç½®

- `commitlint.config.js` - ä½¿ç”¨ `@commitlint/config-conventional` ä½œä¸ºåŸºç¡€é…ç½®

## å¯ç”¨å‘½ä»¤

### ä»£ç æ£€æŸ¥

```bash
# æ£€æŸ¥ä»£ç å¹¶è‡ªåŠ¨ä¿®å¤
pnpm lint

# æ£€æŸ¥ä»£ç æ ¼å¼
pnpm format:check

# æ ¼å¼åŒ–æ‰€æœ‰ä»£ç 
pnpm format
```

### ç±»å‹æ£€æŸ¥

```bash
# è¿è¡Œ TypeScript ç±»å‹æ£€æŸ¥
pnpm typecheck
```

### å¼€å‘

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
pnpm start
```

## å·¥ä½œæµç¨‹

### æäº¤ä»£ç æµç¨‹

1. **ä¿®æ”¹ä»£ç ** å¹¶æš‚å­˜æ–‡ä»¶

   ```bash
   git add .
   ```

2. **æ‰§è¡Œ commit**

   ```bash
   git commit -m "feat: add new feature"
   ```

3. **è‡ªåŠ¨æ‰§è¡Œ**:
   - âœ… Pre-commit hook è¿è¡Œ lint-staged
     - è‡ªåŠ¨ä¿®å¤ ESLint é—®é¢˜
     - è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç 
   - âœ… Commit-msg hook éªŒè¯ commit message æ ¼å¼
     - å¦‚æœæ ¼å¼ä¸æ­£ç¡®ï¼Œcommit ä¼šè¢«é˜»æ­¢

4. **å¦‚æœæ‰€æœ‰æ£€æŸ¥é€šè¿‡**ï¼Œcommit æˆåŠŸå®Œæˆ

### è·³è¿‡ Hooksï¼ˆä¸æ¨èï¼‰

å¦‚æœéœ€è¦è·³è¿‡ hooksï¼ˆç´§æ€¥æƒ…å†µï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ï¼š

```bash
git commit --no-verify -m "message"
```

âš ï¸ **æ³¨æ„**: è·³è¿‡ hooks ä¼šç»•è¿‡ä»£ç è´¨é‡æ£€æŸ¥ï¼Œä¸æ¨èåœ¨ç”Ÿäº§ä»£ç ä¸­ä½¿ç”¨ã€‚

## ä¾èµ–åŒ…

### å¼€å‘ä¾èµ–

- `eslint` - ä»£ç æ£€æŸ¥å·¥å…·
- `prettier` - ä»£ç æ ¼å¼åŒ–å·¥å…·
- `husky` - Git hooks ç®¡ç†
- `lint-staged` - åªå¯¹æš‚å­˜æ–‡ä»¶è¿è¡Œ linter
- `@commitlint/cli` - Commit message éªŒè¯
- `@commitlint/config-conventional` - Conventional Commits é…ç½®

## é…ç½®æ–‡ä»¶æ¸…å•

- `eslint.config.js` - ESLint é…ç½®
- `.prettierrc` - Prettier é…ç½®
- `.prettierignore` - Prettier å¿½ç•¥æ–‡ä»¶
- `commitlint.config.js` - Commitlint é…ç½®
- `.husky/pre-commit` - Pre-commit hook
- `.husky/commit-msg` - Commit-msg hook
- `package.json` - åŒ…å« lint-staged é…ç½®å’Œè„šæœ¬
